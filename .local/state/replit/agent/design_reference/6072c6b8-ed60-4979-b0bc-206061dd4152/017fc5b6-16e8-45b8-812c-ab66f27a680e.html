<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tata Capital Assistant - Chatbot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'tata-primary': '#005BAC',
                        'tata-accent': '#00AEEF',
                        'tata-text': '#4B4B4B',
                        'tata-bg': '#F8F9FA',
                        'bot-bubble': '#E6F0FA',
                        'user-bubble': '#DCF8C6'
                    },
                    fontFamily: {
                        'system': ['Inter', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'sans-serif']
                    }
                }
            }
        };
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="font-system bg-tata-bg text-tata-text h-screen overflow-hidden">
    
    <!-- @COMPONENT: ChatHeader -->
    <header class="bg-tata-primary text-white px-4 py-3 shadow-lg relative z-10">
        <div class="flex items-center justify-between max-w-4xl mx-auto">
            <div class="flex items-center space-x-3">
                <!-- Tata Capital logo placeholder -->
                <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center">
                    <span class="text-tata-primary font-bold text-sm">TC</span>
                </div>
                <div>
                    <h1 class="text-lg font-semibold">Tata Capital Assistant</h1>
                    <p class="text-blue-200 text-xs">Your financial companion</p>
                </div>
            </div>
            <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                <span class="text-sm text-blue-200">Online</span>
            </div>
        </div>
    </header>
    <!-- @END_COMPONENT: ChatHeader -->

    <!-- @COMPONENT: ChatContainer -->
    <div class="flex flex-col h-full pt-16 pb-20">
        
        <!-- @COMPONENT: ChatMessages -->
        <div id="chatContainer" class="flex-1 overflow-y-auto px-4 py-6 space-y-4 scroll-smooth">
            <div class="max-w-4xl mx-auto space-y-6">
                
                <!-- Welcome Message -->
                <!-- @COMPONENT: BotMessage -->
                <div class="flex items-start space-x-3 animate-fadeIn">
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 bg-tata-accent rounded-full flex items-center justify-center">
                            <i class="fas fa-robot text-white text-sm"></i>
                        </div>
                    </div>
                    <div class="flex-1">
                        <div class="bg-bot-bubble rounded-2xl rounded-tl-md px-4 py-3 shadow-sm max-w-md">
                            <p class="text-sm leading-relaxed" data-mock="true">Hello! I'm your Tata Capital Assistant. I'm here to help you with all your financial needs - from loan inquiries to investment guidance. How can I assist you today?</p>
                        </div>
                        <div class="flex items-center mt-1 space-x-2">
                            <span class="text-xs text-gray-500" data-bind="message.timestamp">2:30 PM</span>
                        </div>
                    </div>
                </div>
                <!-- @END_COMPONENT: BotMessage -->

                <!-- User Message -->
                <!-- @COMPONENT: UserMessage -->
                <div class="flex items-start space-x-3 justify-end animate-fadeIn">
                    <div class="flex-1 flex justify-end">
                        <div class="bg-user-bubble rounded-2xl rounded-tr-md px-4 py-3 shadow-sm max-w-md">
                            <p class="text-sm leading-relaxed" data-mock="true">Hi! I'm interested in learning about personal loans. What are the current interest rates?</p>
                        </div>
                    </div>
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                            <i class="fas fa-user text-gray-600 text-sm"></i>
                        </div>
                    </div>
                </div>
                <div class="flex justify-end">
                    <div class="flex items-center mt-1 space-x-2">
                        <span class="text-xs text-gray-500" data-bind="message.timestamp">2:31 PM</span>
                        <i class="fas fa-check-double text-tata-accent text-xs"></i>
                    </div>
                </div>
                <!-- @END_COMPONENT: UserMessage -->

                <!-- Bot Response with Rich Content -->
                <!-- @COMPONENT: BotMessage -->
                <div class="flex items-start space-x-3 animate-fadeIn">
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 bg-tata-accent rounded-full flex items-center justify-center">
                            <i class="fas fa-robot text-white text-sm"></i>
                        </div>
                    </div>
                    <div class="flex-1">
                        <div class="bg-bot-bubble rounded-2xl rounded-tl-md px-4 py-3 shadow-sm max-w-lg">
                            <p class="text-sm leading-relaxed mb-3" data-mock="true">Great question! Our personal loan rates are very competitive. Here's what we're currently offering:</p>
                            <div class="bg-white rounded-lg p-3 mb-3 border border-blue-100">
                                <div class="space-y-2">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm font-medium">Personal Loan</span>
                                        <span class="text-sm font-bold text-tata-primary" data-mock="true">10.5% - 15.5%</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm font-medium">Home Loan</span>
                                        <span class="text-sm font-bold text-tata-primary" data-mock="true">8.5% - 12.0%</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm font-medium">Car Loan</span>
                                        <span class="text-sm font-bold text-tata-primary" data-mock="true">9.0% - 13.5%</span>
                                    </div>
                                </div>
                            </div>
                            <p class="text-sm leading-relaxed" data-mock="true">The exact rate depends on your credit score, income, and loan amount. Would you like me to help you check your eligibility?</p>
                        </div>
                        <div class="flex items-center mt-1 space-x-2">
                            <span class="text-xs text-gray-500" data-bind="message.timestamp">2:32 PM</span>
                        </div>
                    </div>
                </div>
                <!-- @END_COMPONENT: BotMessage -->

                <!-- User Follow-up -->
                <!-- @COMPONENT: UserMessage -->
                <div class="flex items-start space-x-3 justify-end animate-fadeIn">
                    <div class="flex-1 flex justify-end">
                        <div class="bg-user-bubble rounded-2xl rounded-tr-md px-4 py-3 shadow-sm max-w-md">
                            <p class="text-sm leading-relaxed" data-mock="true">Yes, please! I need a loan of ₹5 lakhs for home renovation. My credit score is around 750.</p>
                        </div>
                    </div>
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                            <i class="fas fa-user text-gray-600 text-sm"></i>
                        </div>
                    </div>
                </div>
                <div class="flex justify-end">
                    <div class="flex items-center mt-1 space-x-2">
                        <span class="text-xs text-gray-500" data-bind="message.timestamp">2:33 PM</span>
                        <i class="fas fa-check-double text-tata-accent text-xs"></i>
                    </div>
                </div>
                <!-- @END_COMPONENT: UserMessage -->

                <!-- Typing Indicator -->
                <!-- @COMPONENT: TypingIndicator -->
                <div id="typingIndicator" class="flex items-start space-x-3 animate-fadeIn" style="display: none;">
                    <div class="flex-shrink-0">
                        <div class="w-8 h-8 bg-tata-accent rounded-full flex items-center justify-center">
                            <i class="fas fa-robot text-white text-sm"></i>
                        </div>
                    </div>
                    <div class="flex-1">
                        <div class="bg-bot-bubble rounded-2xl rounded-tl-md px-4 py-3 shadow-sm w-16">
                            <div class="flex space-x-1">
                                <div class="w-2 h-2 bg-tata-accent rounded-full animate-bounce"></div>
                                <div class="w-2 h-2 bg-tata-accent rounded-full animate-bounce" style="animation-delay: 0.1s;"></div>
                                <div class="w-2 h-2 bg-tata-accent rounded-full animate-bounce" style="animation-delay: 0.2s;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- @END_COMPONENT: TypingIndicator -->

            </div>
        </div>
        <!-- @END_COMPONENT: ChatMessages -->

    </div>
    <!-- @END_COMPONENT: ChatContainer -->

    <!-- @COMPONENT: ChatInput -->
    <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-4 shadow-lg">
        <div class="max-w-4xl mx-auto">
            <form id="chatForm" class="flex items-end space-x-3" data-event="submit:handleSendMessage">
                <div class="flex-1 relative">
                    <textarea 
                        id="messageInput" 
                        placeholder="Type your message here..." 
                        class="w-full resize-none rounded-2xl border border-gray-300 px-4 py-3 pr-12 focus:outline-none focus:ring-2 focus:ring-tata-accent focus:border-transparent transition-all duration-200 text-sm leading-relaxed max-h-32 min-h-[48px]"
                        rows="1"
                        data-implementation="Auto-resize textarea based on content"
                    ></textarea>
                    <!-- Character counter -->
                    <div class="absolute bottom-2 right-3 text-xs text-gray-400" id="charCounter">0/500</div>
                </div>
                <button 
                    type="submit" 
                    id="sendButton"
                    class="bg-tata-accent hover:bg-blue-600 text-white rounded-2xl px-6 py-3 transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-tata-accent focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
                    data-event="click:handleSendMessage"
                    data-implementation="Disable button when input is empty or during sending"
                >
                    <i class="fas fa-paper-plane"></i>
                    <span class="ml-2 hidden sm:inline">Send</span>
                </button>
            </form>
            
            <!-- Quick Actions -->
            <div class="flex flex-wrap gap-2 mt-3">
                <button class="bg-gray-100 hover:bg-gray-200 text-tata-text px-3 py-1.5 rounded-full text-xs transition-colors duration-200" data-mock="true">
                    Check loan eligibility
                </button>
                <button class="bg-gray-100 hover:bg-gray-200 text-tata-text px-3 py-1.5 rounded-full text-xs transition-colors duration-200" data-mock="true">
                    Calculate EMI
                </button>
                <button class="bg-gray-100 hover:bg-gray-200 text-tata-text px-3 py-1.5 rounded-full text-xs transition-colors duration-200" data-mock="true">
                    Investment options
                </button>
                <button class="bg-gray-100 hover:bg-gray-200 text-tata-text px-3 py-1.5 rounded-full text-xs transition-colors duration-200" data-mock="true">
                    Contact support
                </button>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: ChatInput -->

    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.3s ease-out;
        }
        
        /* Custom scrollbar */
        #chatContainer::-webkit-scrollbar {
            width: 6px;
        }
        
        #chatContainer::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        
        #chatContainer::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }
        
        #chatContainer::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        /* Textarea auto-resize */
        #messageInput {
            field-sizing: content;
        }
    </style>

    <script>
        (function() {
            // DOM elements
            const chatContainer = document.getElementById('chatContainer');
            const messageInput = document.getElementById('messageInput');
            const sendButton = document.getElementById('sendButton');
            const chatForm = document.getElementById('chatForm');
            const typingIndicator = document.getElementById('typingIndicator');
            const charCounter = document.getElementById('charCounter');

            // Auto-scroll to bottom
            function scrollToBottom() {
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }

            // Show typing indicator
            function showTypingIndicator() {
                typingIndicator.style.display = 'flex';
                scrollToBottom();
            }

            // Hide typing indicator
            function hideTypingIndicator() {
                typingIndicator.style.display = 'none';
            }

            // Create message element
            function createMessageElement(message, isUser = false) {
                const messageDiv = document.createElement('div');
                const timestamp = new Date().toLocaleTimeString('en-US', { 
                    hour: 'numeric', 
                    minute: '2-digit',
                    hour12: true 
                });

                if (isUser) {
                    messageDiv.innerHTML = `
                        <div class="flex items-start space-x-3 justify-end animate-fadeIn">
                            <div class="flex-1 flex justify-end">
                                <div class="bg-user-bubble rounded-2xl rounded-tr-md px-4 py-3 shadow-sm max-w-md">
                                    <p class="text-sm leading-relaxed">${message}</p>
                                </div>
                            </div>
                            <div class="flex-shrink-0">
                                <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                                    <i class="fas fa-user text-gray-600 text-sm"></i>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-end">
                            <div class="flex items-center mt-1 space-x-2">
                                <span class="text-xs text-gray-500">${timestamp}</span>
                                <i class="fas fa-check-double text-tata-accent text-xs"></i>
                            </div>
                        </div>
                    `;
                } else {
                    messageDiv.innerHTML = `
                        <div class="flex items-start space-x-3 animate-fadeIn">
                            <div class="flex-shrink-0">
                                <div class="w-8 h-8 bg-tata-accent rounded-full flex items-center justify-center">
                                    <i class="fas fa-robot text-white text-sm"></i>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="bg-bot-bubble rounded-2xl rounded-tl-md px-4 py-3 shadow-sm max-w-md">
                                    <p class="text-sm leading-relaxed">${message}</p>
                                </div>
                                <div class="flex items-center mt-1 space-x-2">
                                    <span class="text-xs text-gray-500">${timestamp}</span>
                                </div>
                            </div>
                        </div>
                    `;
                }

                return messageDiv;
            }

            // Handle form submission
            function handleSendMessage(e) {
                e.preventDefault();
                
                const message = messageInput.value.trim();
                if (!message) return;

                // Add user message
                const messagesContainer = chatContainer.querySelector('.space-y-6');
                const userMessage = createMessageElement(message, true);
                messagesContainer.appendChild(userMessage);

                // Clear input
                messageInput.value = '';
                updateCharCounter();
                autoResize();

                // Scroll to bottom
                scrollToBottom();

                // Show typing indicator
                showTypingIndicator();

                // Simulate bot response after delay
                setTimeout(() => {
                    hideTypingIndicator();
                    
                    // Mock bot responses
                    const botResponses = [
                        "Excellent! With a credit score of 750, you qualify for our best rates. For a ₹5 lakh personal loan, you'd get an interest rate of around 11.5% per annum. The EMI would be approximately ₹11,200 for 4 years. Would you like me to start the application process?",
                        "I'd be happy to help you with that! Let me check our current offers and get back to you with the best options available.",
                        "That's a great question! Based on your profile, I can recommend several suitable options. Let me provide you with detailed information.",
                        "Thank you for choosing Tata Capital! I'm here to make your financial journey smooth and hassle-free. How else can I assist you today?"
                    ];
                    
                    const randomResponse = botResponses[Math.floor(Math.random() * botResponses.length)];
                    const botMessage = createMessageElement(randomResponse, false);
                    messagesContainer.appendChild(botMessage);
                    
                    scrollToBottom();
                }, 1500 + Math.random() * 1000); // Random delay between 1.5-2.5 seconds
            }

            // Auto-resize textarea
            function autoResize() {
                messageInput.style.height = 'auto';
                messageInput.style.height = Math.min(messageInput.scrollHeight, 128) + 'px';
            }

            // Update character counter
            function updateCharCounter() {
                const count = messageInput.value.length;
                charCounter.textContent = `${count}/500`;
                charCounter.classList.toggle('text-red-400', count > 450);
            }

            // Event listeners
            chatForm.addEventListener('submit', handleSendMessage);
            
            messageInput.addEventListener('input', function() {
                autoResize();
                updateCharCounter();
                
                // Enable/disable send button
                sendButton.disabled = !this.value.trim();
            });

            messageInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    handleSendMessage(e);
                }
            });

            // Quick action buttons
            document.querySelectorAll('button[data-mock="true"]').forEach(button => {
                button.addEventListener('click', function() {
                    messageInput.value = this.textContent.trim();
                    updateCharCounter();
                    autoResize();
                    messageInput.focus();
                });
            });

            // Initialize
            scrollToBottom();
            updateCharCounter();
            sendButton.disabled = true;

            // Simulate initial bot message after page load
            setTimeout(() => {
                scrollToBottom();
            }, 500);

        })();
    </script>

</body>
</html>